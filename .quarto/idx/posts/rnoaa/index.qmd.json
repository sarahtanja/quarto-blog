{"title":"Tides & WX Station Data","markdown":{"yaml":{"title":"Tides & WX Station Data","subtitle":"How to use the rnoaa package","author":"Sarah Tanja","date":"02/05/2024","categories":["learning journey"],"image":"thumbnail.jpg","draft":false,"toc":true,"toc-title":"Contents <i class=\"bi bi-bookmark-heart\"></i>","toc-depth":5,"toc-location":"left","reference-location":"margin","citation-location":"margin","link-external-icon":true,"link-external-newwindow":true,"bibliography":"../library.bib"},"headingText":"Install packages","containsRefs":false,"markdown":"\n\n\"Air temperature and tide data Air temperature and tide level data was obtained from various sources depending on the location. Hourly temperature and tide data for Toke Point and Port Townsend and tide data from Neah Bay and Budd Inlet was obtained from publically available National Oceanic and Atmospheric Administration (NOAA) tide station data using the 'rnoaa' package in R (Chamberlin et al. 2021, R Core Team 2021). Hourly temperature and tide data for Vancouver and tide data for Pruth Bay was obtained from publically available Department of Fisheries and Oceans (DFO) Canada tide station data. Air temperature data for Pruth Bay was obtained from the Hakai Institute weather station (Giesbrecht et al. 2021). Air temperature data for Neah Bay was obtained from a weather station on nearby Tatoosh Island, WA (C. Pfister and T. Wootton personal communication). Air temperature data for Budd Inlet was obtained from the nearby Evergreen State College weather station. If raw data was reported at time scale less than one hour, mean hourly temperature was calculated. These data can be accessed two ways, both of which are available (Raymond, 2022). There, static data files are archived as well as code to query and process them if necessary. Long term, 1991 -- 2020, air temperature data was obtained from the National Aeronautical and Space Agency (NASA) DAYMET surface temperature database using the 'daymetr' package in R (Hufkens 2021). We extracted maximum and minimum daily surface air temperatures from 2° latitude by 2° longitude grids. Grids were selected by the location of the hourly temperatures/tide stations above. These are Toke Point 46.7499° N -124.0250°W, Budd Inlet 47.0643°N -122.9106°W, Neah Bay 48.3770°N -124.6897°W, Port Townsend and Vancouver 48.1172°N -122.7890°W, and Pruth Bay 51.6271°N -127.6450°W. From this raw daily data, long term daily mean high and low temperatures were calculated. Code to obtain and processes these data in the R environment are available (Raymond, 2022).\"\n\narchived in Zenodo https://zenodo.org/records/6555076\n\nhttps://github.com/wraymond/Ecology_heatwave-salish-sea-shellfish/tree/v1.0\n\n\n```{r}\nif ('tidyverse' %in% rownames(installed.packages()) == 'FALSE') install.packages('tidyverse')\nif ('noaaoceans' %in% rownames(installed.packages()) == 'FALSE') install.packages('noaaoceans')\nif ('cowplot' %in% rownames(installed.packages()) == 'FALSE') install.packages('cowplot')\nif ('lubridate' %in% rownames(installed.packages()) == 'FALSE') install.packages('lubridate')\nif ('rnoaa' %in% rownames(installed.packages()) == 'FALSE') install.packages('rnoaa')\nif ('daymetr' %in% rownames(installed.packages()) == 'FALSE') install.packages('daymetr')\nif ('heatwaveR' %in% rownames(installed.packages()) =='FALSE') install.packages('heatwaveR')\nif ('tiff' %in% rownames(installed.packages()) == 'FALSE') install.packages('tiff')\n```\n\n### Load libraries\n\n```{r libraries}\nlibrary(noaaoceans)\nlibrary(tidyverse)\nlibrary(cowplot)\nlibrary(lubridate)\nlibrary(rnoaa)\nlibrary(daymetr)\nlibrary(heatwaveR)\nlibrary(tiff)\n\ntheme_set(theme_classic())\n```\n### Load Data\nImport NOAA tide and weather station data\n\n```{r}\n# NOAA Air temp data from Toke Point, Port Townsend #\nnoaa.air.stations <- c(\"9440910\", \"9444900\")\nair.temp <- data.frame()\nfor (i in noaa.air.stations) {\n    query.df2 <- query_coops_data(station_id = i,\n                                 start_date = '20210624',\n                                 end_date = '20210701',\n                                 data_product = 'air_temperature',\n                                 units = \"metric\", \n                                 time_zone = \"lst_ldt\",\n                                 interval = 'h') \n    air.temp <- air.temp %>% bind_rows(., query.df2)\n}\n```\n\n```{r}\n## Water Levels ##\n\n# NOAA Water levels from Toke Point, Port Townsend, Neah Bay, and Budd Inlet #\nnoaa.tide.stations <- c(\"9440910\", \"9444900\", \"9443090\", \"9446807\")\nwater.level <- data.frame()\nfor (i in noaa.tide.stations) {\n    query.df3 <- query_coops_data(station_id = i,\n                                 start_date = '20210624',\n                                 end_date = '20210701',\n                                 data_product = 'predictions',\n                                 units = \"metric\",\n                                 datum = \"MLLW\",\n                                 interval = \"h\",\n                                 time_zone = \"lst_ldt\") \n    water.level <- water.level %>% bind_rows(., query.df3)\n}\n```\n\n### Load Gridded climate data\nPull from Daymet 2 X 2 degree surface grid. https://daymet.ornl.gov/getdata\n\n```{r gridded}\n## Olympia ##\noly.grid <- download_daymet(site = \"olympia\", lat = 47.064316, lon = -122.910577, start = 1991, end = 2020, internal = TRUE)\n\n## Port Townsend + Vancouver BC ##\nptv.grid <- download_daymet(site = \"port_townsend\", lat = 48.1172, lon = -122.789, start = 1991, end = 2020, internal = TRUE)\n\n## Neah Bay ##\nnhb.grid <- download_daymet(site = \"neah_bay\", lat = 48.377, lon = -124.6897, start = 1991, end = 2020, internal = TRUE)\n\n## Toke Point ##\ntkp.grid <- download_daymet(site = \"toke_point\", lat = 46.7499, lon = -124.025, start = 1991, end = 2020, internal = TRUE)\n\n## Calvert Island ##\ncvi.grid <- download_daymet(site = \"calvert_island\", lat = 51.6271, lon = -127.645, start = 1991, end = 2020, internal = TRUE)\n```\n","srcMarkdownNoYaml":"\n\n\"Air temperature and tide data Air temperature and tide level data was obtained from various sources depending on the location. Hourly temperature and tide data for Toke Point and Port Townsend and tide data from Neah Bay and Budd Inlet was obtained from publically available National Oceanic and Atmospheric Administration (NOAA) tide station data using the 'rnoaa' package in R (Chamberlin et al. 2021, R Core Team 2021). Hourly temperature and tide data for Vancouver and tide data for Pruth Bay was obtained from publically available Department of Fisheries and Oceans (DFO) Canada tide station data. Air temperature data for Pruth Bay was obtained from the Hakai Institute weather station (Giesbrecht et al. 2021). Air temperature data for Neah Bay was obtained from a weather station on nearby Tatoosh Island, WA (C. Pfister and T. Wootton personal communication). Air temperature data for Budd Inlet was obtained from the nearby Evergreen State College weather station. If raw data was reported at time scale less than one hour, mean hourly temperature was calculated. These data can be accessed two ways, both of which are available (Raymond, 2022). There, static data files are archived as well as code to query and process them if necessary. Long term, 1991 -- 2020, air temperature data was obtained from the National Aeronautical and Space Agency (NASA) DAYMET surface temperature database using the 'daymetr' package in R (Hufkens 2021). We extracted maximum and minimum daily surface air temperatures from 2° latitude by 2° longitude grids. Grids were selected by the location of the hourly temperatures/tide stations above. These are Toke Point 46.7499° N -124.0250°W, Budd Inlet 47.0643°N -122.9106°W, Neah Bay 48.3770°N -124.6897°W, Port Townsend and Vancouver 48.1172°N -122.7890°W, and Pruth Bay 51.6271°N -127.6450°W. From this raw daily data, long term daily mean high and low temperatures were calculated. Code to obtain and processes these data in the R environment are available (Raymond, 2022).\"\n\narchived in Zenodo https://zenodo.org/records/6555076\n\nhttps://github.com/wraymond/Ecology_heatwave-salish-sea-shellfish/tree/v1.0\n\n### Install packages\n\n```{r}\nif ('tidyverse' %in% rownames(installed.packages()) == 'FALSE') install.packages('tidyverse')\nif ('noaaoceans' %in% rownames(installed.packages()) == 'FALSE') install.packages('noaaoceans')\nif ('cowplot' %in% rownames(installed.packages()) == 'FALSE') install.packages('cowplot')\nif ('lubridate' %in% rownames(installed.packages()) == 'FALSE') install.packages('lubridate')\nif ('rnoaa' %in% rownames(installed.packages()) == 'FALSE') install.packages('rnoaa')\nif ('daymetr' %in% rownames(installed.packages()) == 'FALSE') install.packages('daymetr')\nif ('heatwaveR' %in% rownames(installed.packages()) =='FALSE') install.packages('heatwaveR')\nif ('tiff' %in% rownames(installed.packages()) == 'FALSE') install.packages('tiff')\n```\n\n### Load libraries\n\n```{r libraries}\nlibrary(noaaoceans)\nlibrary(tidyverse)\nlibrary(cowplot)\nlibrary(lubridate)\nlibrary(rnoaa)\nlibrary(daymetr)\nlibrary(heatwaveR)\nlibrary(tiff)\n\ntheme_set(theme_classic())\n```\n### Load Data\nImport NOAA tide and weather station data\n\n```{r}\n# NOAA Air temp data from Toke Point, Port Townsend #\nnoaa.air.stations <- c(\"9440910\", \"9444900\")\nair.temp <- data.frame()\nfor (i in noaa.air.stations) {\n    query.df2 <- query_coops_data(station_id = i,\n                                 start_date = '20210624',\n                                 end_date = '20210701',\n                                 data_product = 'air_temperature',\n                                 units = \"metric\", \n                                 time_zone = \"lst_ldt\",\n                                 interval = 'h') \n    air.temp <- air.temp %>% bind_rows(., query.df2)\n}\n```\n\n```{r}\n## Water Levels ##\n\n# NOAA Water levels from Toke Point, Port Townsend, Neah Bay, and Budd Inlet #\nnoaa.tide.stations <- c(\"9440910\", \"9444900\", \"9443090\", \"9446807\")\nwater.level <- data.frame()\nfor (i in noaa.tide.stations) {\n    query.df3 <- query_coops_data(station_id = i,\n                                 start_date = '20210624',\n                                 end_date = '20210701',\n                                 data_product = 'predictions',\n                                 units = \"metric\",\n                                 datum = \"MLLW\",\n                                 interval = \"h\",\n                                 time_zone = \"lst_ldt\") \n    water.level <- water.level %>% bind_rows(., query.df3)\n}\n```\n\n### Load Gridded climate data\nPull from Daymet 2 X 2 degree surface grid. https://daymet.ornl.gov/getdata\n\n```{r gridded}\n## Olympia ##\noly.grid <- download_daymet(site = \"olympia\", lat = 47.064316, lon = -122.910577, start = 1991, end = 2020, internal = TRUE)\n\n## Port Townsend + Vancouver BC ##\nptv.grid <- download_daymet(site = \"port_townsend\", lat = 48.1172, lon = -122.789, start = 1991, end = 2020, internal = TRUE)\n\n## Neah Bay ##\nnhb.grid <- download_daymet(site = \"neah_bay\", lat = 48.377, lon = -124.6897, start = 1991, end = 2020, internal = TRUE)\n\n## Toke Point ##\ntkp.grid <- download_daymet(site = \"toke_point\", lat = 46.7499, lon = -124.025, start = 1991, end = 2020, internal = TRUE)\n\n## Calvert Island ##\ncvi.grid <- download_daymet(site = \"calvert_island\", lat = 51.6271, lon = -127.645, start = 1991, end = 2020, internal = TRUE)\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"kable","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":{"source":true,"toggle":true},"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":true,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","highlight-style":{"light":"github","dark":"github-dark"},"toc":true,"toc-depth":5,"number-sections":true,"reference-location":"margin","output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.549","editor":"visual","bibliography":["../../references.bib","../library.bib"],"author":"Sarah Tanja","date-format":"long","date-modified":"today","theme":{"light":["solar","../../light-theme.css"],"dark":["solar","../../dark-theme.css"]},"page-layout":"article","code-background":true,"toc-title":"Contents <i class=\"bi bi-bookmark-heart\"></i>","toc-expand":true,"toc-location":"left","smooth-scroll":true,"citation-location":"margin","repo-actions":["edit","issue"],"title-block-banner":true,"title":"Tides & WX Station Data","subtitle":"How to use the rnoaa package","date":"02/05/2024","categories":["learning journey"],"image":"thumbnail.jpg","draft":false},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}